(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{376:function(s,a,e){"use strict";e.r(a);var t=e(25),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),e("blockquote",[e("p",[s._v("规范使用git commit message 说明每次提交的目的，提高开发效率")])]),s._v(" "),e("h2",{attrs:{id:"commit-message-格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commit-message-格式"}},[s._v("#")]),s._v(" commit message 格式")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<type>(<scope>) : <subject>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-29422b8a32941fce5c80d4598de98007_720w.png",alt:"提交类别"}})]),s._v(" "),e("ul",[e("li",[s._v("type(必须)\n"),e("ul",[e("li",[s._v("fix/to:\n"),e("ul",[e("li",[s._v("fix: 产生diff并自动批复此问题，适用于一次提交直接修复问题")]),s._v(" "),e("li",[s._v("to： 只产生diff未解决问题，适用于多次提交（最后一次用fix）")])])]),s._v(" "),e("li",[s._v("docs: 文档")]),s._v(" "),e("li",[s._v("style: 格式（不影响代码运行的变动）")]),s._v(" "),e("li",[s._v("refactor: 重构（不是新增功能，也不是修改bug的代码变动）")]),s._v(" "),e("li",[s._v("pref：优化相关，性能提升、体验")]),s._v(" "),e("li",[s._v("test: 增加测试")]),s._v(" "),e("li",[s._v("revert: 回滚到上一个版本")]),s._v(" "),e("li",[s._v("merge: 代码合并")]),s._v(" "),e("li",[s._v("sync: 同步主线或分支的Bug")])])]),s._v(" "),e("li",[s._v("scope(可选) ： 用于说明commit影响的范围（如数据层、控制层、视图层等），多个的话直接用* 代替")]),s._v(" "),e("li",[s._v("subject(必须)：commit目的的简短描述、不超过50个字符")])]),s._v(" "),e("p",[s._v("初始化")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git init\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("添加a.txt文件内容为a")]),s._v(" "),e("p",[s._v("添加到暂存区")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git add a.txt \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("修改a.txt文件内容为b")])]),s._v(" "),e("p",[s._v("放弃此次修改，还原暂存区的内容,但是暂存区不会删除")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git restore a.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除暂存区的内容，-f 删除暂存区的内容并删除文件")]),s._v(" "),e("p",[s._v("注意，只能当文件已经在暂存区中才能执行，工作区不能执行。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git rm --cache -f  a.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将暂存区内容添加到本地仓库,第一次commit 会产生一个HEAD并指向master分支。 .git\\refs\\heads 中生成一个master文件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git commit -m 'one'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# master 文件\n60a8394bddea30dd770862a64fb10383efc91fff\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("查看当前commit日志")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git log\n# or\ngit log --graph\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("查看所有的历史commit信息")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git reflog\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看所有分支")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git branch\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("新建分支")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 新建分支，不切换\ngit branch dev\n\n# 新建分支并切换， checkout存在歧义，checkout可以撤销修改\ngit checkout -b dev\n\n# 创建并切换, 推荐使用\ngit switch -c newBranchName\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("删除分支")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git branch -d dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("切换分支")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git checkout dev\n# 推荐使用\ngit switch dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("**未add的内容不属于任何一个分支， 未commit的内容也不属于任何一个分支,对于所有分支而言,工作区和暂存区是公共的 **")]),s._v(" "),e("p",[s._v("切换dev分支后添加一个b.txt")]),s._v(" "),e("p",[s._v("b.txt当前未commit 不属于任意一个分支，此时切换到master分支，b.txt也会存在，如果不想切换后存在使用 git stash命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 在执行stash前必须先将文件添加到暂存区，先执行下git add 加到git版本控制中\ngit add b.txt\n# 保存暂存区中的内容 到 .git\\refs\\stash 中，一个hash值，理解为一个特别的分支 \ngit stash\n# or save跟上stash描述\ngit stash save 'dev:stash'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("取出stash中的内容,并删除stash中的hash,如果只有一个那么，删除stash文件，")]),s._v(" "),e("p",[s._v("**注意：**在dev分支中stash, master分支中也可以查看与删除,因为工作区与暂存区是共享的。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git stash pop stash_id\n# or\ngit stash apply stash_id\n# stash_id通过git stash list 获取\n# 区别\n# pop会在恢复后删除指定的stash\n# apply不会删除\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("查看stash记录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git stash list\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("合并master分支上的commit到dev上(流程):")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("首先切换到master分支\n\ngit checkout master\n\ngit log\n\n找出要合并的commit ID :\n\n例如\n\n 652b9a3171c3f22942e4a6024a737e04c6b4d6d4\n\n然后切换到B分支上\n\ngit checkout B\n\ngit cherry-pick   652b9a3171c3f22942e4a6024a737e04c6b4d6d4\n# 此时dev分支上会新增一个commit,来自master分支的commit\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("p",[s._v("开发分支（dev）上的代码达到上线的标准后，要合并到 master 分支")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git checkout dev\ngit pull\ngit checkout master\ngit merge dev\ngit push -u origin master\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("当master代码改动了，需要更新开发分支（dev）上的代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git checkout master \ngit pull \ngit checkout dev\ngit merge master \ngit push -u origin dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("取消合并")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git reset --merge  'commitID'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("撤销commit")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("git reset HEAD~1            # 回退所有内容到上一个版本~2 两个版本\ngit reset HEAD~1 hello.php \t# # 回退 hello.php 文件的版本到上一个版本  \ngit reset 052e   \t\t\t# 回退到指定版本\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://github.com/kuishou68/assets/blob/main/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.png",alt:"Git常用命令"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);